<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no,adress=no" name="format-detection">
    <meta content="fullscreen=yes,preventMove=no" name="ML-Config">
    <meta name="author" content="G.fan">
    <meta name="copyright" content="这里是公司和法律声明">
    <meta name="description" content="这里是网站描述">
    <meta name="keywords" content="这里是关键字,关键字">
    <!-- 一些cdn库 -->
    <script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <title>标题</title>
</head>
<body>
<div id="app">
</div>
<!-- 不打包进-->
<script src="/static/js/libs/jquery-3.0.0.min.js"></script>
<script src="/static/js/libs/underscore-min.js"></script>

<!-- 监听横屏切换事件 -->
<div id="hide" style="display: none;">
    <h1>
        请使用竖屏浏览
    </h1>
</div>
<script type="text/javascript">
    (function () {
        //  检测到页面横竖屏变化就重新渲染
        var screenStatus = function () {
            if (window.orientation == 0) {
                document.getElementById("app").style.display = "block";
                document.getElementById("hide").style.display = "none";
            } else {
                document.getElementById("app").style.display = "none";
                document.getElementById("hide").style.display = "block";
            }
        };
        window.onorientationchange = screenStatus;
        screenStatus();
    })();
</script>
<!-- 监听横屏切换事件 end -->


<!-- 微信分享相关 线下环境会提示签名出错 -->
<script type="text/javascript">

    $(window).on("load", function () {
        getWxConfig();
    });

    //  改变分享标题和介绍,请在相应页面改变 window.shareInfoWx 的相关属性
    window.shareInfoWx = {
        'name': "这是一个标题",
        'desc': "这是一个介绍",
        'image': "http://这是一个图片url.jpg"
    };
    var loc = window.location.href;

    var getWxConfig = function () {
        var url = loc.split('#')[0];
        $.ajax({
            url: 'http://从服务器获取验证信息?Access-Control-Allow-Origin=1',
            type: 'GET',
            data: {
                url: url
            },
            success: function (data) {
                console.log(data);
                wx.config({
                    debug: false,
                    appId: 'wx3f44f37038103ff2',
                    timestamp: data.timestamp,
                    nonceStr: data.noncestr,
                    signature: data.signature,
                    jsApiList: [
                        'onMenuShareTimeline',
                        'onMenuShareAppMessage',
                        'scanQRCode'
                    ]
                });
            },
            error: function (data) {
                console.log("error");
            }
        })
    };

    wx.ready(function () {
        // 2. 分享接口
        // 2.1 监听“分享给朋友”，按钮点击、自定义分享内容及分享结果接口
        wx.onMenuShareAppMessage({
            title: window.shareInfoWx.name,
            desc: window.shareInfoWx.desc,
            link: window.location.href,
            imgUrl: window.shareInfoWx.image,
            fail: function (res) {
                //alert(JSON.stringify(res));
            }
        });
        // 2.2 监听“分享到朋友圈”按钮点击、自定义分享内容及分享结果接口
        wx.onMenuShareTimeline({
            title: window.shareInfoWx.name,     //ShareTimelineTitle此为分享标题
            link: window.location.href,
            imgUrl: window.shareInfoWx.image,
            fail: function (res) {
                //console.log(JSON.stringify(res));
            }
        });
    });

    wx.error(function (res) {
        console.log('wx.error: ' + res.errMsg);
    });
</script>
<!-- 微信分享相关 end-->


<!-- built files will be auto injected -->
</body>
</html>
